source {{tool_options.linting_ruleset}}

workspace.create "alint_workspace" -force
workspace.project.create -force {{name}}
project.waiver.clear

{{ '# AUTOGENERATED BY FUSESOC' }}
################################
{% for f in src_files %}
workspace.file.add -destination {{name}} {{f.name}}
{% endfor %}
################################

{{ '# WAIVERS FROM MACRO FILES' }}
################################
{% for f in waiver_files %}
{{ '# FILE : ' }}{{f.name}}
{% include f.name  %}
{% endfor %}
################################

project.pref.toplevels -project {{name}} -top {{toplevel}}
project.run -project {{name}}

project.report.violations -report alint_output/reports/Rules.txt -severity warning
project.report.violations -report alint_output/reports/Guidelines.txt -severity info
project.report.violations -report console -severity warning
